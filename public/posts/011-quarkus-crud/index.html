<!doctype html>







<html
  class="not-ready lg:text-base"
  style="--bg:#faf8f1"
  lang="tr"
  dir="ltr"
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Quarkus Crud - &lt; ahmetkaygisiz /&gt;</title>

  
  <meta name="theme-color" />

  <meta name="description" content="Merhabalar,
Quarkus Framework&rsquo;ünün fantastikliğinden bir önceki yazıda bahsetmiştik. Şimdi bu framework ile basit bir crud uygulamasını nasıl yaparız buna bakalım.
Projenin Oluşturulması Projeyi oluşturmadan önce versiyon gereksinimleri aşağıdaki gibi olmalıdır.
java -version -&gt; 8 veya 11 mvn -version -&gt; 3.6.2&#43; JAVA_HOME ortam değişkeni tanımlı olmalı Projemizi oluşturmak için aşağıdaki komutu giriyoruz.
mvn io.io.quarkus:quarkus-maven-plugin:1.10.5.Final:create \ -DprojectGroupId=com.akua \ -DprojectArtifactId=quarkus-tutorial \ -DclassName=&#34;com.akua.resources.UserResources&#34; \ -Dpath=&#34;/users&#34; Herhangi bir ekleme yapmadan quarkusun bize sunmuş olduğu dosya yapısı aşağıdaki şekildedir." />
  <meta name="author" content="&lt; ahmetkaygisiz /&gt;" /><link rel="preload stylesheet" as="style" href="http://localhost:1313/main.min.css" />

  
  <link rel="preload" as="image" href="http://localhost:1313/theme.png" />

  

  <link rel="preload" as="image" href="http://localhost:1313/twitter.svg" /><link rel="preload" as="image" href="http://localhost:1313/github.svg" />

  <script
    defer
    src="http://localhost:1313/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>

  
  <link
    rel="icon"
    href="http://localhost:1313/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="http://localhost:1313/apple-touch-icon.png"
  />

  <meta name="generator" content="Hugo 0.128.2">
</head>
<body
    class="bg-(--bg) text-black antialiased duration-200 ease-out [-webkit-tap-highlight-color:transparent] dark:text-white"
  ><header
  class="mx-auto flex h-[4.5rem] max-w-(--w) px-8 whitespace-nowrap lg:justify-center"
>
  <div class="relative z-50 flex items-center ltr:mr-auto rtl:ml-auto">
    <a
      class="-translate-y-[1px] text-2xl font-medium"
      href="http://localhost:1313/"
      >&lt; ahmetkaygisiz /&gt;</a
    >
    <div
      class="btn-dark text-[0px] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden ltr:-mr-8 rtl:-ml-8"
    role="button"
    aria-label="Menu"
  ></div>

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full flex-col justify-center bg-(--bg) pb-16 duration-200 select-none lg:static lg:h-auto lg:flex-row lg:bg-transparent! lg:pb-0 lg:transition-none"
  ><nav
      class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse"
    ><a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/"
        >cd ~</a
      ><a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/whoami/"
        >whoami</a
      ><a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/categorylist/"
        >ls ~/categories</a
      ></nav><nav
      class="mt-12 flex justify-center space-x-10 lg:mt-0 lg:items-center ltr:lg:ml-14 rtl:space-x-reverse rtl:lg:mr-14 dark:invert"
    >
      <a
        class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/notfound"
        target="_blank"
        rel="me"
      >twitter</a>
      <a
        class="h-7 w-7 text-[0px] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/ahmetkaygisiz"
        target="_blank"
        rel="me"
      >github</a>
    </nav>
  </div>
</header>
<main
      class="prose prose-neutral dark:prose-invert relative mx-auto min-h-[calc(100vh-9rem)] max-w-(--w) px-8 pt-14 pb-16"
    ><article>
  <header class="mb-14">
    <h1 class="my-0! pb-2.5">Quarkus Crud</h1><div class="text-xs antialiased opacity-60"><time>Feb 10, 2021</time></div></header>

  <section><p>Merhabalar,<br>
Quarkus Framework&rsquo;ünün fantastikliğinden bir önceki yazıda bahsetmiştik. Şimdi bu framework ile basit bir crud uygulamasını nasıl yaparız buna bakalım.</p>
<h3 id="projenin-oluşturulması">Projenin Oluşturulması</h3>
<p>Projeyi oluşturmadan önce versiyon gereksinimleri aşağıdaki gibi olmalıdır.</p>
<ul>
<li>java -version -&gt; 8 veya 11</li>
<li>mvn -version -&gt;  3.6.2+</li>
<li>JAVA_HOME ortam değişkeni tanımlı olmalı</li>
</ul>
<p>Projemizi oluşturmak için aşağıdaki komutu giriyoruz.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mvn io.io.quarkus:quarkus-maven-plugin:1.10.5.Final:create <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>        -DprojectGroupId<span style="color:#f92672">=</span>com.akua <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>        -DprojectArtifactId<span style="color:#f92672">=</span>quarkus-tutorial <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>        -DclassName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;com.akua.resources.UserResources&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>        -Dpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/users&#34;</span>
</span></span></code></pre></div><p>Herhangi bir ekleme yapmadan quarkusun bize sunmuş olduğu dosya yapısı aşağıdaki şekildedir. Görüldüğü gibi bize src/main/docker folder&rsquo;ı altında hazır 3 adet Dockerfile sunuyor. pom.xml içerisinde de eklentiler, profil, temel gerekli olan bağımlılıklar ve tanımlamalar başlangıç yapısında bizi karşılıyor.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> kaygisiz λ quarkus-tutorial ➜ tree .
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>|-- README.md
</span></span><span style="display:flex;"><span>|-- mvnw
</span></span><span style="display:flex;"><span>|-- mvnw.cmd
</span></span><span style="display:flex;"><span>|-- pom.xml
</span></span><span style="display:flex;"><span><span style="color:#e6db74">`</span>-- src
</span></span><span style="display:flex;"><span>    |-- main
</span></span><span style="display:flex;"><span>    |   |-- docker
</span></span><span style="display:flex;"><span>    |   |   |-- Dockerfile.fast-jar
</span></span><span style="display:flex;"><span>    |   |   |-- Dockerfile.jvm
</span></span><span style="display:flex;"><span>    |   |   <span style="color:#e6db74">`</span>-- Dockerfile.native
</span></span><span style="display:flex;"><span>    |   |-- java
</span></span><span style="display:flex;"><span>    |   |   <span style="color:#e6db74">`</span>-- com
</span></span><span style="display:flex;"><span>    |   |       <span style="color:#e6db74">`</span>-- akua
</span></span><span style="display:flex;"><span>    |   |           <span style="color:#e6db74">`</span>-- resources
</span></span><span style="display:flex;"><span>    |   |               <span style="color:#e6db74">`</span>-- UserResources.java
</span></span><span style="display:flex;"><span>    |   <span style="color:#e6db74">`</span>-- resources
</span></span><span style="display:flex;"><span>    |       |-- META-INF
</span></span><span style="display:flex;"><span>    |       |   <span style="color:#e6db74">`</span>-- resources
</span></span><span style="display:flex;"><span>    |       |       <span style="color:#e6db74">`</span>-- index.html
</span></span><span style="display:flex;"><span>    |       <span style="color:#e6db74">`</span>-- application.properties
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">`</span>-- test
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">`</span>-- java
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">`</span>-- com
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">`</span>-- akua
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">`</span>-- resources
</span></span><span style="display:flex;"><span>                        |-- NativeUserResourcesIT.java
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">`</span>-- UserResourcesTest.java
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span> directories, <span style="color:#ae81ff">12</span> files
</span></span></code></pre></div><p>Geliştireceğimiz uygulama RESTful bir servis olacak ve postgresql kullanacağız. Bunun için bazı bağımlılıkları pom.xml dosyamıza eklemeliyiz. Bu bağımlılıklar sırasıyla:</p>
<ul>
<li>jdbc-postgresql : Postgresql Veritabanı Bağımlılığı</li>
<li>agroal : JDBC Pool Yönetimi</li>
<li>resteasy-jackson : Serialize/Deserialize</li>
</ul>
<p>Projeye başlangıçta bu bağımlılıkları -Dextensions= parametresiyle ekleyebileceğimiz gibi  ./mvnw quarkus:add-extension -Dextensions= komutunu kullanarak da ekleyebiliyoruz. Şimdi ihtiyacımız olan parametreleri ekleyelim ve X has been installed çıktılarını görelim.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./mvnw quarkus:add-extension -Dextensions<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;jdbc-postgresql,agroal,resteasy-jackson&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> kaygisiz λ quarkus-tutorial ➜ ./mvnw quarkus:add-extension -Dextensions<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;jdbc-postgresql,agroal,resteasy-jackson&#34;</span>
</span></span><span style="display:flex;"><span>....
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> --- quarkus-maven-plugin:1.10.5.Final:add-extension <span style="color:#f92672">(</span>default-cli<span style="color:#f92672">)</span> @ quarkus-tutorial ---
</span></span><span style="display:flex;"><span>? Extension io.quarkus:quarkus-resteasy-jackson has been installed
</span></span><span style="display:flex;"><span>? Extension io.quarkus:quarkus-agroal has been installed
</span></span><span style="display:flex;"><span>? Extension io.quarkus:quarkus-jdbc-postgresql has been installed
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> ------------------------------------------------------------------------
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> BUILD SUCCESS
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p><img src="/011-quarkus-tutorial-project-structure.png" alt="Uygulama Yapısı"></p>
<center>Uygulama Yapısı</center>
<p>Geliştireceğimiz uygulama yapısı yukarıdaki gibi olacak. api&rsquo;mizin bir String mesaj döneceği Response, temel veri yapımız User, veritabanı ile ilişkilerin yönetileceği Manager ve Repository classları ve son olarak endpointlerin yönetileceği controller yapısındaki resource.</p>
<p>İlk adım olarak application.properties dosyamıza veritabanı için gerekli değişkenlerimizi giriyoruz.</p>
<p>application.properties</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">quarkus.datasource.db-kind=postgresql</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">quarkus.datasource.username=postgres</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">quarkus.datasource.password=${your_password}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/temp</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">quarkus.datasource.jdbc.max-size=16</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">İkinci adım olarak POJO&#39;muzu oluşturalım.</span>
</span></span></code></pre></div><p>domain/User.java</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.domain;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.UUID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> UUID id;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String email;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String password;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">User</span>() { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">User</span>(UUID id, String email, String password) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> id;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">email</span> <span style="color:#f92672">=</span> email;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">password</span> <span style="color:#f92672">=</span> password;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> UUID <span style="color:#a6e22e">getId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setId</span>(UUID id) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getEmail</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> email;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setEmail</span>(String email) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">email</span> <span style="color:#f92672">=</span> email;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getPassword</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> password;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setPassword</span>(String password) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">password</span> <span style="color:#f92672">=</span> password;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Object<span style="color:#f92672">[]</span> <span style="color:#a6e22e">toObjectArray</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span> { email, password };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Veritabanı bağlantılarını oluşturmalıyız. Burada bağlantı yönetimi ve prepared statement yönetimi için base classımız olan DBManager&rsquo;ı oluşturuyoruz. Burada Dependency Injection @ApplicationScoped ile yapılıyor yani bu nesnenin yönetimi artık framework yönetimine geçiyor. Bu objeden bir tane oluşturuluyor ve @Inject annotation&rsquo;ı tek oluşturulan bu nesne çağırılıp farklı classlarda kullanılabilir hale geliyor.</p>
<p>DataSource objesi, application properties&rsquo;de bilgilerini verdiğimiz veritabanına göre agroal JDBC yöneticisi tarafından oluşturuluyor ve bize @Inject annotation&rsquo;ı ile bu veritabanı üzerinde işlem yapabilmemize olanak sağlıyor.</p>
<p>repository/manager/DBManager.java</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.repository.manager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.enterprise.context.ApplicationScoped;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.inject.Inject;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.sql.DataSource;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.Connection;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.PreparedStatement;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ApplicationScoped</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DBManager</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Inject</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> DataSource dataSource;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Connection conn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">connect</span>() <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        conn <span style="color:#f92672">=</span> dataSource.<span style="color:#a6e22e">getConnection</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">close</span>() <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ( conn <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            conn.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> PreparedStatement <span style="color:#a6e22e">getPreparedStatement</span>(String query) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> conn.<span style="color:#a6e22e">prepareStatement</span>(query);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> PreparedStatement <span style="color:#a6e22e">getPreparedStatementWithParams</span>(String query, Object<span style="color:#f92672">[]</span> params) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        PreparedStatement ps <span style="color:#f92672">=</span> conn.<span style="color:#a6e22e">prepareStatement</span>(query);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i<span style="color:#f92672">&lt;</span> params.<span style="color:#a6e22e">length</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            ps.<span style="color:#a6e22e">setObject</span>(i <span style="color:#f92672">+</span> 1, params<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ps;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">executePS</span>(String query) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        PreparedStatement ps <span style="color:#f92672">=</span> getPreparedStatement(query);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">boolean</span> status <span style="color:#f92672">=</span> ps.<span style="color:#a6e22e">execute</span>();
</span></span><span style="display:flex;"><span>        ps.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> status;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executePSWithParams</span>(String query, Object<span style="color:#f92672">[]</span> params) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        PreparedStatement ps <span style="color:#f92672">=</span> getPreparedStatementWithParams(query, params);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> status <span style="color:#f92672">=</span> ps.<span style="color:#a6e22e">executeUpdate</span>();
</span></span><span style="display:flex;"><span>        ps.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> status;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>User için gerekli bir kaç method&rsquo;un eklendiği UserDBManager class&rsquo;ımız da aşağıdaki gibidir.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.repository.manager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.domain.User;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.enterprise.context.ApplicationScoped;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.PreparedStatement;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.ResultSet;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.UUID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ApplicationScoped</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserDBManager</span> <span style="color:#66d9ef">extends</span> DBManager{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getResultSet</span>(String query) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        PreparedStatement ps <span style="color:#f92672">=</span> getPreparedStatement(query);
</span></span><span style="display:flex;"><span>        ResultSet rs <span style="color:#f92672">=</span> ps.<span style="color:#a6e22e">executeQuery</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> resultSetToOArrayList(rs);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getResultSetWithParams</span>(String query, Object<span style="color:#f92672">[]</span> params) <span style="color:#66d9ef">throws</span>  SQLException {
</span></span><span style="display:flex;"><span>        ResultSet rs <span style="color:#f92672">=</span> getPreparedStatementWithParams(query, params).<span style="color:#a6e22e">executeQuery</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> resultSetToOArrayList(rs);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">resultSetToOArrayList</span>(ResultSet rs) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> dataList <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span>( rs.<span style="color:#a6e22e">next</span>() ){
</span></span><span style="display:flex;"><span>            User user <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> User();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            user.<span style="color:#a6e22e">setId</span>((UUID) rs.<span style="color:#a6e22e">getObject</span>(<span style="color:#e6db74">&#34;id&#34;</span>));
</span></span><span style="display:flex;"><span>            user.<span style="color:#a6e22e">setEmail</span>(rs.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;email&#34;</span>));
</span></span><span style="display:flex;"><span>            user.<span style="color:#a6e22e">setPassword</span>(rs.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;password&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            dataList.<span style="color:#a6e22e">add</span>(user);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        rs.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> dataList;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>PreparedStatement&rsquo;ın yürütülüp ve bize sonuç döndüren repository classımız da şu şekil.</p>
<p>repository/UserRepository.java</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.repository;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.domain.User;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.repository.manager.UserDBManager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.enterprise.context.ApplicationScoped;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.sql.SQLException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.UUID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ApplicationScoped</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserRepository</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USERS_FIND_BY_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;SELECT * FROM users WHERE id = ?&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USERS_FIND_ALL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;SELECT * FROM users&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USERS_INSERT <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;INSERT INTO users (id, email, password) VALUES(?, ?, ?)&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USERS_UPDATE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;UPDATE people SET name = ?, age = ? WHERE id = ?&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String USERS_DELETE_BY_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DELETE FROM users WHERE id = ?&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> UserDBManager manager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">UserRepository</span>(UserDBManager manager){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">manager</span> <span style="color:#f92672">=</span> manager;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">findAll</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> getQueryResults(USERS_FIND_ALL);
</span></span><span style="display:flex;"><span>        }<span style="color:#66d9ef">catch</span> (SQLException e){
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">findById</span>(UUID id) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> getUserById(USERS_FIND_BY_ID, id);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">insert</span>(User user) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> executeQueryWithParams(USERS_INSERT, <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span>{
</span></span><span style="display:flex;"><span>                    user.<span style="color:#a6e22e">getId</span>(), user.<span style="color:#a6e22e">getEmail</span>(), user.<span style="color:#a6e22e">getPassword</span>()});
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">update</span>(User user){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> executeQueryWithParams(USERS_UPDATE, <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span>{
</span></span><span style="display:flex;"><span>                    user.<span style="color:#a6e22e">getEmail</span>(), user.<span style="color:#a6e22e">getPassword</span>(), user.<span style="color:#a6e22e">getId</span>()
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">deleteById</span>(UUID id){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> executeQueryWithParams(USERS_DELETE_BY_ID, <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span>{ id });
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (SQLException e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">executeQuery</span>(String query) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">connect</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">boolean</span> isSucceed <span style="color:#f92672">=</span> manager.<span style="color:#a6e22e">executePS</span>(query);
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> isSucceed;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">executeQueryWithParams</span>(String query, Object<span style="color:#f92672">[]</span> params) <span style="color:#66d9ef">throws</span> SQLException{
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">connect</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> isSucceed <span style="color:#f92672">=</span> manager.<span style="color:#a6e22e">executePSWithParams</span>(query, params);
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> isSucceed;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getQueryResults</span>(String query) <span style="color:#66d9ef">throws</span> SQLException{
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">connect</span>();
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> manager.<span style="color:#a6e22e">getResultSet</span>(query);
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>  users;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getUserById</span>(String query, UUID id) <span style="color:#66d9ef">throws</span> SQLException {
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">connect</span>();
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> user <span style="color:#f92672">=</span> manager.<span style="color:#a6e22e">getResultSetWithParams</span>(query, <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]</span>{ id });
</span></span><span style="display:flex;"><span>        manager.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> user;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Bilgilendirme mesajlarımızı döneceğimiz Response classımız :</p>
<p>api/Response.java</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.api;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Response</span> {
</span></span><span style="display:flex;"><span>    String message;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Response</span>(String message){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getMessage</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMessage</span>(String message) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> message;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Son olarak uygulamızın etkileşime geçeceği Resourse yapısı da şöyle. Aşağıda da görüldüğü üzere GET, POST, PUT, DELETE işlemlerini yapan bir adet RESTful api yazmış olduk.</p>
<p>resource/UserResource.java</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.akua.resource;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.api.Response;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.domain.User;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.akua.repository.UserRepository;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.ws.rs.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.ws.rs.core.MediaType;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.UUID;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Path</span>(<span style="color:#e6db74">&#34;/users&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserResource</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> UserRepository userRepository;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">UserResource</span>(UserRepository userRepository){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">userRepository</span> <span style="color:#f92672">=</span> userRepository;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@GET</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Produces</span>(MediaType.<span style="color:#a6e22e">APPLICATION_JSON</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">all</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> userRepository.<span style="color:#a6e22e">findAll</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@GET</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Path</span>(<span style="color:#e6db74">&#34;{id}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Produces</span>(MediaType.<span style="color:#a6e22e">APPLICATION_JSON</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">@PathParam</span>(<span style="color:#e6db74">&#34;id&#34;</span>) UUID id){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> userRepository.<span style="color:#a6e22e">findById</span>(id);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@POST</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Produces</span>(MediaType.<span style="color:#a6e22e">APPLICATION_JSON</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Response <span style="color:#a6e22e">post</span>(User user){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> status <span style="color:#f92672">=</span> userRepository.<span style="color:#a6e22e">insert</span>(<span style="color:#66d9ef">new</span> User(UUID.<span style="color:#a6e22e">randomUUID</span>(), user.<span style="color:#a6e22e">getEmail</span>(), user.<span style="color:#a6e22e">getPassword</span>()));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (status <span style="color:#f92672">==</span> 1)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;User created!&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;Something goes wrong&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@PUT</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Path</span>(<span style="color:#e6db74">&#34;{id}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Produces</span>(MediaType.<span style="color:#a6e22e">APPLICATION_JSON</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Response <span style="color:#a6e22e">put</span>(<span style="color:#a6e22e">@PathParam</span>(<span style="color:#e6db74">&#34;id&#34;</span>) UUID id, User user){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ( userRepository.<span style="color:#a6e22e">findById</span>(id) <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotFoundException(<span style="color:#e6db74">&#34;User not found!&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> status <span style="color:#f92672">=</span> userRepository.<span style="color:#a6e22e">update</span>(<span style="color:#66d9ef">new</span> User(id, user.<span style="color:#a6e22e">getEmail</span>(), user.<span style="color:#a6e22e">getPassword</span>()));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (status <span style="color:#f92672">==</span> 1)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;User updated!&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;Something goes wrong&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@DELETE</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Path</span>(<span style="color:#e6db74">&#34;{id}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Produces</span>(MediaType.<span style="color:#a6e22e">APPLICATION_JSON</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Response <span style="color:#a6e22e">delete</span>(<span style="color:#a6e22e">@PathParam</span>(<span style="color:#e6db74">&#34;id&#34;</span>) UUID id){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ( userRepository.<span style="color:#a6e22e">findById</span>(id) <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotFoundException(<span style="color:#e6db74">&#34;User not found&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> status <span style="color:#f92672">=</span> userRepository.<span style="color:#a6e22e">deleteById</span>(id);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (status <span style="color:#f92672">==</span> 1)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;User deleted!&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Response(<span style="color:#e6db74">&#34;Something goes wrong&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="uygulamanın-ayağa-kaldırılması">Uygulamanın Ayağa Kaldırılması</h3>
<p>Quarkus&rsquo;un en güzel yanlarından biri de development modda başlattığınızda backend&rsquo;de yaptığınız bir değişikliğin yeniden başlatmaya gerek duymadan uygulanması. Development mod&rsquo;da başlatmak için aşağıdaki komutu giriyoruz.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./mvnw compile quarkus:dev
</span></span></code></pre></div><h3 id="sonuç-ve-hedefler">Sonuç ve Hedefler</h3>
<p>Temel olarak bir CRUD uygulamayı geliştirdik ve ayağa kaldırdık. Quarkus ile olan maceralarımız burada bitmeyecek. Keşfetmemiz gereken native kısmını da ilerleyen yazılarda kurcalayıp asıl kullanılması gereken alanın neresi olduğunu göreceğiz. Başlangıç yapmış olduk geresini de getiririz umarım :)</p>
<p>Güzel günleri de görmek dileğiyle.</p>
</section>

  <footer class="mt-12 flex flex-wrap"><a
      class="mb-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] ltr:mr-1.5 rtl:ml-1.5 dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/java"
      >java</a
    ><a
      class="mb-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] ltr:mr-1.5 rtl:ml-1.5 dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/quarkus"
      >quarkus</a
    ><a
      class="mb-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] ltr:mr-1.5 rtl:ml-1.5 dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="http://localhost:1313/tags/crud"
      >crud</a
    ></footer><nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg leading-[1.2]! *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  ><a class="ltr:pr-3 rtl:pl-3" href="http://localhost:1313/posts/012-go-gopher-1/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Go Gopher-I</span></a
    ><a
      class="justify-end pl-3 ltr:ml-auto rtl:mr-auto"
      href="http://localhost:1313/posts/010-quarkus-framework-nedir/"
      ><span>Quarkus Framework Nedir</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    ></nav></article></main><footer
  class="mx-auto flex h-[4.5rem] max-w-(--w) items-center px-8 text-xs tracking-wider uppercase opacity-60"
>
  <div class="mr-auto">Copyright sag.click © 2025, Ahmet Kaygısız and the sag.click; all rights reserved.</div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>
</body>
</html>
